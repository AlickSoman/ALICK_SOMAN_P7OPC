{"remainingRequest":"/Users/admin/Desktop/RESEAU-GROUPOMANIA/groupomania-réseau-social/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/RESEAU-GROUPOMANIA/groupomania-réseau-social/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/admin/Desktop/RESEAU-GROUPOMANIA/groupomania-réseau-social/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/RESEAU-GROUPOMANIA/groupomania-réseau-social/src/views/Signup.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/admin/Desktop/RESEAU-GROUPOMANIA/groupomania-réseau-social/src/views/Signup.vue","mtime":1647605453070},{"path":"/Users/admin/Desktop/RESEAU-GROUPOMANIA/groupomania-réseau-social/node_modules/cache-loader/dist/cjs.js","mtime":1646670308046},{"path":"/Users/admin/Desktop/RESEAU-GROUPOMANIA/groupomania-réseau-social/node_modules/babel-loader/lib/index.js","mtime":1646670309179},{"path":"/Users/admin/Desktop/RESEAU-GROUPOMANIA/groupomania-réseau-social/node_modules/cache-loader/dist/cjs.js","mtime":1646670308046},{"path":"/Users/admin/Desktop/RESEAU-GROUPOMANIA/groupomania-réseau-social/node_modules/vue-loader-v16/dist/index.js","mtime":1646670309571}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2FkbWluL0Rlc2t0b3AvUkVTRUFVLUdST1VQT01BTklBL2dyb3Vwb21hbmlhLXJceEU5c2VhdS1zb2NpYWwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IE5hdiBmcm9tICcuLi9jb21wb25lbnRzL05hdi52dWUnOwppbXBvcnQgcm91dGVyIGZyb20gJy4uL3JvdXRlcic7CmltcG9ydCBzdG9yZSBmcm9tICcuLi9zdG9yZS9pbmRleC5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2lnbnVwJywKICBjb21wb25lbnRzOiB7CiAgICBOYXY6IE5hdgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGFGb3JtOiB7CiAgICAgICAgZmlyc3RuYW1lOiBudWxsLAogICAgICAgIGxhc3RuYW1lOiBudWxsLAogICAgICAgIGVtYWlsOiBudWxsLAogICAgICAgIHBhc3N3b3JkOiBudWxsCiAgICAgIH0sCiAgICAgIGVyck1zZzogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8qIGFzc2lnbmUgbGVzIHZhbGV1cnMgZW50csOpZXMgZHUgZm9ybXVsYWlyZSDDoCBsJ29iamV0IGRhdGEgKi8KICAgICAgdmFyIGRhdGEgPSBfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLmRhdGFGb3JtKTsKCiAgICAgIHZhciBsb2dpbiA9IHsKICAgICAgICBlbWFpbDogdGhpcy5kYXRhRm9ybS5lbWFpbCwKICAgICAgICBwYXNzd29yZDogdGhpcy5kYXRhRm9ybS5wYXNzd29yZAogICAgICB9OwogICAgICAvKiB2w6lyaWZpZSBzaSB0b3VzIGxlcyBjaGFtcHMgc29udCBiaWVuIHJlbXBsaXMgKi8KCiAgICAgIGlmICghZGF0YS5maXJzdG5hbWUgfHwgIWRhdGEubGFzdG5hbWUgfHwgIWRhdGEuZW1haWwgfHwgIWRhdGEucGFzc3dvcmQpIHsKICAgICAgICB0aGlzLmVyck1zZyA9ICJFcnIhIFJlbXBsaXNzZXogdG91cyBsZXMgY2hhbXBzIGR1IGZvcm11bGFpcmUiOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAvKiBub3MgcmVnZXggKi8KCgogICAgICB2YXIgcmVnZXhOYW1lID0gL15bYS16w6nDqMOnw6DDqsOvw7xdezIsNTB9KC18ICk/KFthLXrDqcOow6fDoF17Miw1MH0pPyQvZ21pOwogICAgICB2YXIgcmVnZXhFbWFpbCA9IC9eW1x3LS5dezIsMzJ9QChbXHctXStcLikrW1x3LV17Miw0fSQvZzsKICAgICAgdmFyIHJlZ2V4UGFzc3dvcmQgPSAvKCg/PS4qXGQpKD89LipbYS16XSkoPz0uKltBLVpdKSg/PS4qW1xXXSkuezgsMzJ9KS87CiAgICAgIC8qIG5vcyB2w6lmaWZpY2F0aW9ucyAqLwoKICAgICAgaWYgKCFyZWdleE5hbWUudGVzdChkYXRhLmZpcnN0bmFtZSAmJiBkYXRhLmxhc3RuYW1lKSkgewogICAgICAgIHRoaXMuZXJyTXNnID0gIk5hbWUgRXJyISA9PiBmb3JtYXQgbm9tIGV0L291IHByw6lub20gaW5jb3JyZWN0IjsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghcmVnZXhFbWFpbC50ZXN0KGRhdGEuZW1haWwpKSB7CiAgICAgICAgdGhpcy5lcnJNc2cgPSAiRW1haWwgRXJyISA9PiBsJ2VtYWlsIGluc2NyaXQgbidhIHBhcyBsZSBib24gZm9ybWF0IChleGVtcGxlQG1haWwuY29tKSI7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIXJlZ2V4UGFzc3dvcmQudGVzdChkYXRhLnBhc3N3b3JkKSkgewogICAgICAgIHRoaXMuZXJyTXNnID0gIlBhc3N3b3JkIEVyciEgPT4gZW50cmUgOCBldCAzMiBjYXJhY3TDqHJlcyArIDEgbWludXNjdWxlIG1pbiArIDEgbWFqIG1pbiArIDEgY2FyYWN0w6hyZSBzcMOpY2lhbCI7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8qIGVudm9pIMOgIGwnQVBJIChzaWdudXAgLT4gbG9naW4gLT4gL2hvbWUpICovCgoKICAgICAgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdXNlcnMvc2lnbnVwJywgewogICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICB9LAogICAgICAgIG1vZGU6ICdjb3JzJywKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAxKSB7CiAgICAgICAgICAvKiBTaSBsZSBzaWdudXAgZXN0IHLDqXVzc2kgb24gcGFzc2UgcGFyIGxvZ2luIHBvdXIgb2J0ZW5pciBsZSB0b2tlbiArIHVzZXJJZCBlbiByw6lwb25zZSAqLwogICAgICAgICAgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdXNlcnMvbG9naW4nLCB7CiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICBtb2RlOiAnY29ycycsCiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGxvZ2luKQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIHZhciBsb2NhbERhdGEgPSByZXM7CiAgICAgICAgICAgIHN0b3JlLnN0YXRlLmlzTG9nZ2VkID0gdHJ1ZTsKICAgICAgICAgICAgbG9jYWxEYXRhLmpzb24oKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJZCcsIGRhdGEudXNlcklkKTsKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaXNBZG1pbicsIGRhdGEuaXNBZG1pbik7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgIHBhdGg6ICdob21lJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF90aGlzLmVyck1zZyA9ICJFbWFpbCBvdSBtb3QgZGUgcGFzc2UgaW5jb3JyZWN0IjsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLmVyck1zZyA9ICJFbWFpbCBkw6lqw6AgZXhpc3RhbnQiOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/admin/Desktop/RESEAU-GROUPOMANIA/groupomania-réseau-social/src/views/Signup.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <Nav redirection=\"/login\" :logged=\"false\"/>\n    <div id=\"signupForm\">\n        <h3>Création de compte</h3>\n        <form @submit.prevent=\"onSubmit\">\n            <input type=\"text\" name=\"firstname\" placeholder=\"Prénom\" v-model=\"dataForm.firstname\">\n            <input type=\"text\" name=\"lastname\" placeholder=\"Nom\" v-model=\"dataForm.lastname\">\n            <input type=\"email\" name=\"email\" placeholder=\"Email\" v-model=\"dataForm.email\">\n            <input type=\"password\" name=\"password\" placeholder=\"Mot de passe\" v-model=\"dataForm.password\">\n            <input type=\"submit\" value=\"Je m'inscris !\" class=\"btn\">\n        </form>\n        <h4>{{ errMsg }}</h4>\n        <p>Vous avez déjà un compte ? Cliquez ici: <router-link to=\"/login\">Login</router-link></p>\n    </div>\n</template>\n\n<script>\nimport Nav from '../components/Nav.vue'\nimport router from '../router'\nimport store from '../store/index.js'\nexport default {\n    name: 'Signup',\n    components: {\n        Nav\n    },\n    data() {\n        return {\n            dataForm: {\n                firstname: null,\n                lastname: null,\n                email: null,\n                password: null,\n            },\n            errMsg: null\n        }\n    },\n    methods: {\n        onSubmit() {\n            /* assigne les valeurs entrées du formulaire à l'objet data */\n            const data = {\n                ...this.dataForm\n            }\n            const login = {\n                email: this.dataForm.email,\n                password: this.dataForm.password\n            }\n            /* vérifie si tous les champs sont bien remplis */\n            if (!data.firstname || !data.lastname || !data.email || !data.password) {\n                this.errMsg = \"Err! Remplissez tous les champs du formulaire\"\n                return\n            }    \n            /* nos regex */\n            const regexName = /^[a-zéèçàêïü]{2,50}(-| )?([a-zéèçà]{2,50})?$/gmi;\n            const regexEmail = /^[\\w-.]{2,32}@([\\w-]+\\.)+[\\w-]{2,4}$/g;\n            const regexPassword = /((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\\W]).{8,32})/;\n            /* nos véfifications */\n            if (!(regexName.test(data.firstname && data.lastname))) {\n                this.errMsg = \"Name Err! => format nom et/ou prénom incorrect\";\n                return\n            }\n            if (!(regexEmail.test(data.email))) {\n                this.errMsg = \"Email Err! => l'email inscrit n'a pas le bon format (exemple@mail.com)\"\n                return\n            }\n            if(!(regexPassword.test(data.password))) {\n                this.errMsg = \"Password Err! => entre 8 et 32 caractères + 1 minuscule min + 1 maj min + 1 caractère spécial\"\n                return\n            }\n\n            /* envoi à l'API (signup -> login -> /home) */\n            fetch('http://localhost:3000/api/users/signup', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                mode: 'cors',\n                body: JSON.stringify(data),\n            })  \n                .then(res => { \n                    if (res.status === 201) {\n                        /* Si le signup est réussi on passe par login pour obtenir le token + userId en réponse */\n                        fetch('http://localhost:3000/api/users/login', {\n                            method: 'POST',\n                            mode: 'cors',\n                            headers: {\n                                'Content-Type': 'application/json'\n                            },\n                            body: JSON.stringify(login)\n                        })\n                            .then(res => {\n                                const localData = res\n                                store.state.isLogged = true\n                                localData.json().then(data => {\n                                    localStorage.setItem('token', data.token)\n                                    localStorage.setItem('userId', data.userId)\n                                    localStorage.setItem('isAdmin', data.isAdmin)\n                                })                    \n                                if (res.status === 200 ) {\n                                    router.push({ path: 'home' })\n                                }  else {\n                                    this.errMsg = \"Email ou mot de passe incorrect\"\n                                }\n                            })\n                            .catch(error => {console.error(error)})    \n                    } else {\n                        this.errMsg = \"Email déjà existant\"\n                        return\n                    }\n                \n                })\n                .catch(error => {console.error(error)})\n        }\n    }\n}\n</script>\n\n<style scoped>\n#signupForm {\n    margin: 3rem;\n    height: 70vh;\n    display: flex;\n    justify-content: center;\n    align-content: center;\n    flex-wrap: wrap;\n    flex-direction: column;\n    align-items: center;\n}\nh3 {\n   background-color: #4075C5;\n    background-size: cover;\n    padding: 20px;\n    border-radius: 10px;\n    color: white;\n    text-align: center;\n    margin-bottom: 30px;\n}\nform {\n    display: flex;\n    flex-direction: column;\n    width: 400px;\n}\ninput {\n    margin: 0.8rem;\n    padding: 10px;\n    box-shadow: 2px 2px 8px 5px rgb(0 0 0 / 10%);\n    border-style: none;\n    border-radius: 4px;\n    outline: none;\n}\ninput:hover {\n    box-shadow: 2px 2px 8px 5px rgb(0 0 0 / 18%);\n}\n.btn {\n    color: white;\n    background-color:  #4075C5;\n    margin: 2rem;\n}\n@media screen and (max-width: 992px) {\n    form {\n        width: 100%;\n    }\n}\n</style>"],"sourceRoot":""}]}