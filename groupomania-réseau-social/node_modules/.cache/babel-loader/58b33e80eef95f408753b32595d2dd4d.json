{"remainingRequest":"/Users/admin/Desktop/P7_ALICK_SOMAN/groupomania-réseau-social/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/P7_ALICK_SOMAN/groupomania-réseau-social/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/admin/Desktop/P7_ALICK_SOMAN/groupomania-réseau-social/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/admin/Desktop/P7_ALICK_SOMAN/groupomania-réseau-social/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/P7_ALICK_SOMAN/groupomania-réseau-social/src/views/Signup.vue?vue&type=template&id=024d905c&scoped=true","dependencies":[{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/groupomania-réseau-social/src/views/Signup.vue","mtime":1647605453070},{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/groupomania-réseau-social/node_modules/cache-loader/dist/cjs.js","mtime":1646670308046},{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/groupomania-réseau-social/node_modules/babel-loader/lib/index.js","mtime":1646670309179},{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/groupomania-réseau-social/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1646670310149},{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/groupomania-réseau-social/node_modules/cache-loader/dist/cjs.js","mtime":1646670308046},{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/groupomania-réseau-social/node_modules/vue-loader-v16/dist/index.js","mtime":1646670309571}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCB2TW9kZWxUZXh0IGFzIF92TW9kZWxUZXh0LCB3aXRoRGlyZWN0aXZlcyBhcyBfd2l0aERpcmVjdGl2ZXMsIHdpdGhNb2RpZmllcnMgYXMgX3dpdGhNb2RpZmllcnMsIHRvRGlzcGxheVN0cmluZyBhcyBfdG9EaXNwbGF5U3RyaW5nLCBjcmVhdGVUZXh0Vk5vZGUgYXMgX2NyZWF0ZVRleHRWTm9kZSwgd2l0aEN0eCBhcyBfd2l0aEN0eCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCB3aXRoU2NvcGVJZCBhcyBfd2l0aFNjb3BlSWQsIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7Cgp2YXIgX3dpdGhJZCA9IC8qI19fUFVSRV9fKi9fd2l0aFNjb3BlSWQoImRhdGEtdi0wMjRkOTA1YyIpOwoKX3B1c2hTY29wZUlkKCJkYXRhLXYtMDI0ZDkwNWMiKTsKCnZhciBfaG9pc3RlZF8xID0gewogIGlkOiAic2lnbnVwRm9ybSIKfTsKCnZhciBfaG9pc3RlZF8yID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiaDMiLCBudWxsLCAiQ3LDqWF0aW9uIGRlIGNvbXB0ZSIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF8zID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiaW5wdXQiLCB7CiAgdHlwZTogInN1Ym1pdCIsCiAgdmFsdWU6ICJKZSBtJ2luc2NyaXMgISIsCiAgY2xhc3M6ICJidG4iCn0sIG51bGwsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF80ID0gLyojX19QVVJFX18qL19jcmVhdGVUZXh0Vk5vZGUoIlZvdXMgYXZleiBkw6lqw6AgdW4gY29tcHRlID8gQ2xpcXVleiBpY2k6ICIpOwoKdmFyIF9ob2lzdGVkXzUgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVRleHRWTm9kZSgiTG9naW4iKTsKCl9wb3BTY29wZUlkKCk7CgpleHBvcnQgdmFyIHJlbmRlciA9IC8qI19fUFVSRV9fKi9fd2l0aElkKGZ1bmN0aW9uIChfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICB2YXIgX2NvbXBvbmVudF9OYXYgPSBfcmVzb2x2ZUNvbXBvbmVudCgiTmF2Iik7CgogIHZhciBfY29tcG9uZW50X3JvdXRlcl9saW5rID0gX3Jlc29sdmVDb21wb25lbnQoInJvdXRlci1saW5rIik7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfRnJhZ21lbnQsIG51bGwsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9OYXYsIHsKICAgIHJlZGlyZWN0aW9uOiAiL2xvZ2luIiwKICAgIGxvZ2dlZDogZmFsc2UKICB9KSwgX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2hvaXN0ZWRfMiwgX2NyZWF0ZVZOb2RlKCJmb3JtIiwgewogICAgb25TdWJtaXQ6IF9jYWNoZVs1XSB8fCAoX2NhY2hlWzVdID0gX3dpdGhNb2RpZmllcnMoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gJG9wdGlvbnMub25TdWJtaXQgJiYgJG9wdGlvbnMub25TdWJtaXQuYXBwbHkoJG9wdGlvbnMsIGFyZ3VtZW50cyk7CiAgICB9LCBbInByZXZlbnQiXSkpCiAgfSwgW193aXRoRGlyZWN0aXZlcyhfY3JlYXRlVk5vZGUoImlucHV0IiwgewogICAgdHlwZTogInRleHQiLAogICAgbmFtZTogImZpcnN0bmFtZSIsCiAgICBwbGFjZWhvbGRlcjogIlByw6lub20iLAogICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuICRkYXRhLmRhdGFGb3JtLmZpcnN0bmFtZSA9ICRldmVudDsKICAgIH0pCiAgfSwgbnVsbCwgNTEyCiAgLyogTkVFRF9QQVRDSCAqLwogICksIFtbX3ZNb2RlbFRleHQsICRkYXRhLmRhdGFGb3JtLmZpcnN0bmFtZV1dKSwgX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVWTm9kZSgiaW5wdXQiLCB7CiAgICB0eXBlOiAidGV4dCIsCiAgICBuYW1lOiAibGFzdG5hbWUiLAogICAgcGxhY2Vob2xkZXI6ICJOb20iLAogICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuICRkYXRhLmRhdGFGb3JtLmxhc3RuYW1lID0gJGV2ZW50OwogICAgfSkKICB9LCBudWxsLCA1MTIKICAvKiBORUVEX1BBVENIICovCiAgKSwgW1tfdk1vZGVsVGV4dCwgJGRhdGEuZGF0YUZvcm0ubGFzdG5hbWVdXSksIF93aXRoRGlyZWN0aXZlcyhfY3JlYXRlVk5vZGUoImlucHV0IiwgewogICAgdHlwZTogImVtYWlsIiwKICAgIG5hbWU6ICJlbWFpbCIsCiAgICBwbGFjZWhvbGRlcjogIkVtYWlsIiwKICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzNdIHx8IChfY2FjaGVbM10gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHJldHVybiAkZGF0YS5kYXRhRm9ybS5lbWFpbCA9ICRldmVudDsKICAgIH0pCiAgfSwgbnVsbCwgNTEyCiAgLyogTkVFRF9QQVRDSCAqLwogICksIFtbX3ZNb2RlbFRleHQsICRkYXRhLmRhdGFGb3JtLmVtYWlsXV0pLCBfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZVZOb2RlKCJpbnB1dCIsIHsKICAgIHR5cGU6ICJwYXNzd29yZCIsCiAgICBuYW1lOiAicGFzc3dvcmQiLAogICAgcGxhY2Vob2xkZXI6ICJNb3QgZGUgcGFzc2UiLAogICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbNF0gfHwgKF9jYWNoZVs0XSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuICRkYXRhLmRhdGFGb3JtLnBhc3N3b3JkID0gJGV2ZW50OwogICAgfSkKICB9LCBudWxsLCA1MTIKICAvKiBORUVEX1BBVENIICovCiAgKSwgW1tfdk1vZGVsVGV4dCwgJGRhdGEuZGF0YUZvcm0ucGFzc3dvcmRdXSksIF9ob2lzdGVkXzNdLCAzMgogIC8qIEhZRFJBVEVfRVZFTlRTICovCiAgKSwgX2NyZWF0ZVZOb2RlKCJoNCIsIG51bGwsIF90b0Rpc3BsYXlTdHJpbmcoJGRhdGEuZXJyTXNnKSwgMQogIC8qIFRFWFQgKi8KICApLCBfY3JlYXRlVk5vZGUoInAiLCBudWxsLCBbX2hvaXN0ZWRfNCwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfcm91dGVyX2xpbmssIHsKICAgIHRvOiAiL2xvZ2luIgogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoSWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gW19ob2lzdGVkXzVdOwogICAgfSksCiAgICBfOiAxCiAgICAvKiBTVEFCTEUgKi8KCiAgfSldKV0pXSwgNjQKICAvKiBTVEFCTEVfRlJBR01FTlQgKi8KICApOwp9KTs="},{"version":3,"sources":["/Users/admin/Desktop/P7_ALICK_SOMAN/groupomania-réseau-social/src/views/Signup.vue"],"names":[],"mappings":";;;;;;;AAES,EAAA,EAAE,EAAC;;;8BACJ,YAAA,CAA2B,IAA3B,EAA2B,IAA3B,EAAI,oBAAJ,EAAsB,CAAA;AAAA;AAAtB,C;;8BAMI,YAAA,CAAwD,OAAxD,EAAwD;AAAjD,EAAA,IAAI,EAAC,QAA4C;AAAnC,EAAA,KAAK,EAAC,gBAA6B;AAAZ,EAAA,KAAK,EAAC;AAAM,CAAxD,E,IAAA,E;;AAAA,C;;+CAGD,0C;;+CAAiE,O;;;;;;;;;sDAXxE,YAAA,CAA2C,cAA3C,EAA2C;AAAtC,IAAA,WAAW,EAAC,QAA0B;AAAhB,IAAA,MAAM,EAAE;AAAQ,GAA3C,C,EACA,YAAA,CAWM,KAXN,EAAA,UAAA,EAWM,CAVF,UAUE,EATF,YAAA,CAMO,MANP,EAMO;AANA,IAAA,QAAM,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,cAAA,CAAA;AAAA,aAAU,QAAA,CAAA,QAAA,IAAA,QAAA,CAAA,QAAA,OAAA,QAAA,YAAV;AAAA,KAAA,EAAkB,CAAA,SAAA,CAAlB,CAAA;AAMN,GANP,E,iBACI,YAAA,CAAsF,OAAtF,EAAsF;AAA/E,IAAA,IAAI,EAAC,MAA0E;AAAnE,IAAA,IAAI,EAAC,WAA8D;AAAlD,IAAA,WAAW,EAAC,QAAsC;;aAApB,KAAA,CAAA,QAAA,CAAS,SAAT,GAAkB,M;;AAAE,GAAtF,E,IAAA,E;;AAAA,G,iBAAkE,KAAA,CAAA,QAAA,CAAS,S,qBAC3E,YAAA,CAAiF,OAAjF,EAAiF;AAA1E,IAAA,IAAI,EAAC,MAAqE;AAA9D,IAAA,IAAI,EAAC,UAAyD;AAA9C,IAAA,WAAW,EAAC,KAAkC;;aAAnB,KAAA,CAAA,QAAA,CAAS,QAAT,GAAiB,M;;AAAE,GAAjF,E,IAAA,E;;AAAA,G,iBAA8D,KAAA,CAAA,QAAA,CAAS,Q,qBACvE,YAAA,CAA8E,OAA9E,EAA8E;AAAvE,IAAA,IAAI,EAAC,OAAkE;AAA1D,IAAA,IAAI,EAAC,OAAqD;AAA7C,IAAA,WAAW,EAAC,OAAiC;;aAAhB,KAAA,CAAA,QAAA,CAAS,KAAT,GAAc,M;;AAAE,GAA9E,E,IAAA,E;;AAAA,G,iBAA8D,KAAA,CAAA,QAAA,CAAS,K,qBACvE,YAAA,CAA8F,OAA9F,EAA8F;AAAvF,IAAA,IAAI,EAAC,UAAkF;AAAvE,IAAA,IAAI,EAAC,UAAkE;AAAvD,IAAA,WAAW,EAAC,cAA2C;;aAAnB,KAAA,CAAA,QAAA,CAAS,QAAT,GAAiB,M;;AAAE,GAA9F,E,IAAA,E;;AAAA,G,iBAA2E,KAAA,CAAA,QAAA,CAAS,Q,KACpF,U,CALJ,E;;AAAA,GASE,EAFF,YAAA,CAAqB,IAArB,EAAqB,IAArB,EAAqB,gBAAA,CAAd,KAAA,CAAA,MAAc,CAArB,EAAa;AAAA;AAAb,GAEE,EADF,YAAA,CAA2F,GAA3F,EAA2F,IAA3F,EAA2F,C,UAAA,EAAhD,YAAA,CAA4C,sBAA5C,EAA4C;AAA/B,IAAA,EAAE,EAAC;AAA4B,GAA5C,EAAwB;qBAAC;AAAA,aAAK,C,UAAA,CAAL;AAAA,K,CAAD;;;;AAAA,GAAxB,CAAgD,CAA3F,CACE,CAXN,C","sourcesContent":["<template>\n    <Nav redirection=\"/login\" :logged=\"false\"/>\n    <div id=\"signupForm\">\n        <h3>Création de compte</h3>\n        <form @submit.prevent=\"onSubmit\">\n            <input type=\"text\" name=\"firstname\" placeholder=\"Prénom\" v-model=\"dataForm.firstname\">\n            <input type=\"text\" name=\"lastname\" placeholder=\"Nom\" v-model=\"dataForm.lastname\">\n            <input type=\"email\" name=\"email\" placeholder=\"Email\" v-model=\"dataForm.email\">\n            <input type=\"password\" name=\"password\" placeholder=\"Mot de passe\" v-model=\"dataForm.password\">\n            <input type=\"submit\" value=\"Je m'inscris !\" class=\"btn\">\n        </form>\n        <h4>{{ errMsg }}</h4>\n        <p>Vous avez déjà un compte ? Cliquez ici: <router-link to=\"/login\">Login</router-link></p>\n    </div>\n</template>\n\n<script>\nimport Nav from '../components/Nav.vue'\nimport router from '../router'\nimport store from '../store/index.js'\nexport default {\n    name: 'Signup',\n    components: {\n        Nav\n    },\n    data() {\n        return {\n            dataForm: {\n                firstname: null,\n                lastname: null,\n                email: null,\n                password: null,\n            },\n            errMsg: null\n        }\n    },\n    methods: {\n        onSubmit() {\n            /* assigne les valeurs entrées du formulaire à l'objet data */\n            const data = {\n                ...this.dataForm\n            }\n            const login = {\n                email: this.dataForm.email,\n                password: this.dataForm.password\n            }\n            /* vérifie si tous les champs sont bien remplis */\n            if (!data.firstname || !data.lastname || !data.email || !data.password) {\n                this.errMsg = \"Err! Remplissez tous les champs du formulaire\"\n                return\n            }    \n            /* nos regex */\n            const regexName = /^[a-zéèçàêïü]{2,50}(-| )?([a-zéèçà]{2,50})?$/gmi;\n            const regexEmail = /^[\\w-.]{2,32}@([\\w-]+\\.)+[\\w-]{2,4}$/g;\n            const regexPassword = /((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\\W]).{8,32})/;\n            /* nos véfifications */\n            if (!(regexName.test(data.firstname && data.lastname))) {\n                this.errMsg = \"Name Err! => format nom et/ou prénom incorrect\";\n                return\n            }\n            if (!(regexEmail.test(data.email))) {\n                this.errMsg = \"Email Err! => l'email inscrit n'a pas le bon format (exemple@mail.com)\"\n                return\n            }\n            if(!(regexPassword.test(data.password))) {\n                this.errMsg = \"Password Err! => entre 8 et 32 caractères + 1 minuscule min + 1 maj min + 1 caractère spécial\"\n                return\n            }\n\n            /* envoi à l'API (signup -> login -> /home) */\n            fetch('http://localhost:3000/api/users/signup', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                mode: 'cors',\n                body: JSON.stringify(data),\n            })  \n                .then(res => { \n                    if (res.status === 201) {\n                        /* Si le signup est réussi on passe par login pour obtenir le token + userId en réponse */\n                        fetch('http://localhost:3000/api/users/login', {\n                            method: 'POST',\n                            mode: 'cors',\n                            headers: {\n                                'Content-Type': 'application/json'\n                            },\n                            body: JSON.stringify(login)\n                        })\n                            .then(res => {\n                                const localData = res\n                                store.state.isLogged = true\n                                localData.json().then(data => {\n                                    localStorage.setItem('token', data.token)\n                                    localStorage.setItem('userId', data.userId)\n                                    localStorage.setItem('isAdmin', data.isAdmin)\n                                })                    \n                                if (res.status === 200 ) {\n                                    router.push({ path: 'home' })\n                                }  else {\n                                    this.errMsg = \"Email ou mot de passe incorrect\"\n                                }\n                            })\n                            .catch(error => {console.error(error)})    \n                    } else {\n                        this.errMsg = \"Email déjà existant\"\n                        return\n                    }\n                \n                })\n                .catch(error => {console.error(error)})\n        }\n    }\n}\n</script>\n\n<style scoped>\n#signupForm {\n    margin: 3rem;\n    height: 70vh;\n    display: flex;\n    justify-content: center;\n    align-content: center;\n    flex-wrap: wrap;\n    flex-direction: column;\n    align-items: center;\n}\nh3 {\n   background-color: #4075C5;\n    background-size: cover;\n    padding: 20px;\n    border-radius: 10px;\n    color: white;\n    text-align: center;\n    margin-bottom: 30px;\n}\nform {\n    display: flex;\n    flex-direction: column;\n    width: 400px;\n}\ninput {\n    margin: 0.8rem;\n    padding: 10px;\n    box-shadow: 2px 2px 8px 5px rgb(0 0 0 / 10%);\n    border-style: none;\n    border-radius: 4px;\n    outline: none;\n}\ninput:hover {\n    box-shadow: 2px 2px 8px 5px rgb(0 0 0 / 18%);\n}\n.btn {\n    color: white;\n    background-color:  #4075C5;\n    margin: 2rem;\n}\n@media screen and (max-width: 992px) {\n    form {\n        width: 100%;\n    }\n}\n</style>"],"sourceRoot":""}]}