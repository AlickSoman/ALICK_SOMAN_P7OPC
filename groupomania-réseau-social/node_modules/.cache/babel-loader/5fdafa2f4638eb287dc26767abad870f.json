{"remainingRequest":"/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/src/components/CreatePost.vue?vue&type=template&id=1947abec&scoped=true","dependencies":[{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/src/components/CreatePost.vue","mtime":1631120511000},{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1646670308046},{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/node_modules/babel-loader/lib/index.js","mtime":1646670309179},{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1646670310149},{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1646670308046},{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1646670309571}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdk1vZGVsVGV4dCBhcyBfdk1vZGVsVGV4dCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCB3aXRoRGlyZWN0aXZlcyBhcyBfd2l0aERpcmVjdGl2ZXMsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVCbG9jayBhcyBfY3JlYXRlQmxvY2ssIGNyZWF0ZUNvbW1lbnRWTm9kZSBhcyBfY3JlYXRlQ29tbWVudFZOb2RlLCB0b0Rpc3BsYXlTdHJpbmcgYXMgX3RvRGlzcGxheVN0cmluZywgd2l0aE1vZGlmaWVycyBhcyBfd2l0aE1vZGlmaWVycywgd2l0aFNjb3BlSWQgYXMgX3dpdGhTY29wZUlkLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKdmFyIF93aXRoSWQgPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKCJkYXRhLXYtMTk0N2FiZWMiKTsKCl9wdXNoU2NvcGVJZCgiZGF0YS12LTE5NDdhYmVjIik7Cgp2YXIgX2hvaXN0ZWRfMSA9IHsKICBpZDogImNyZWF0ZVBvc3QiCn07CnZhciBfaG9pc3RlZF8yID0gewogIGlkOiAidGV4dCIKfTsKdmFyIF9ob2lzdGVkXzMgPSB7CiAga2V5OiAwLAogIGlkOiAicHJldmlldyIKfTsKdmFyIF9ob2lzdGVkXzQgPSB7CiAgaWQ6ICJidG5zIgp9OwoKdmFyIF9ob2lzdGVkXzUgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJpbnB1dCIsIHsKICB0eXBlOiAic3VibWl0IiwKICB2YWx1ZTogIkonZW52b2llICEiLAogIGNsYXNzOiAiYnRuIgp9LCBudWxsLCAtMQovKiBIT0lTVEVEICovCik7CgpfcG9wU2NvcGVJZCgpOwoKZXhwb3J0IHZhciByZW5kZXIgPSAvKiNfX1BVUkVfXyovX3dpdGhJZChmdW5jdGlvbiAoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2NyZWF0ZVZOb2RlKCJmb3JtIiwgewogICAgb25TdWJtaXQ6IF9jYWNoZVszXSB8fCAoX2NhY2hlWzNdID0gX3dpdGhNb2RpZmllcnMoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gJG9wdGlvbnMuY3JlYXRlUG9zdCAmJiAkb3B0aW9ucy5jcmVhdGVQb3N0LmFwcGx5KCRvcHRpb25zLCBhcmd1bWVudHMpOwogICAgfSwgWyJwcmV2ZW50Il0pKQogIH0sIFtfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzIsIFtfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZVZOb2RlKCJ0ZXh0YXJlYSIsIHsKICAgIG5hbWU6ICJ0ZXh0YXJlYSIsCiAgICBwbGFjZWhvbGRlcjogIlB1YmxpZXogdm90cmUgbWVzc2FnZSIsCiAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJGRhdGEudGV4dCA9ICRldmVudDsKICAgIH0pCiAgfSwgbnVsbCwgNTEyCiAgLyogTkVFRF9QQVRDSCAqLwogICksIFtbX3ZNb2RlbFRleHQsICRkYXRhLnRleHRdXSldKSwgJGRhdGEucHJldmlldyA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMywgW19jcmVhdGVWTm9kZSgiaW1nIiwgewogICAgc3JjOiAkZGF0YS5wcmV2aWV3LAogICAgYWx0OiAkZGF0YS5wcmV2aWV3CiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbInNyYyIsICJhbHQiXSldKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCJ2LWlmIiwgdHJ1ZSksIF9jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNCwgW19jcmVhdGVWTm9kZSgiaW5wdXQiLCB7CiAgICB0eXBlOiAiZmlsZSIsCiAgICByZWY6ICJmaWxlIiwKICAgIG5hbWU6ICJmaWxlIiwKICAgIGNsYXNzOiAidXBsb2FkIiwKICAgIGlkOiAiZmlsZSIsCiAgICBvbkNoYW5nZTogX2NhY2hlWzJdIHx8IChfY2FjaGVbMl0gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAkb3B0aW9ucy5zZWxlY3RGaWxlICYmICRvcHRpb25zLnNlbGVjdEZpbGUuYXBwbHkoJG9wdGlvbnMsIGFyZ3VtZW50cyk7CiAgICB9KQogIH0sIG51bGwsIDU0NAogIC8qIEhZRFJBVEVfRVZFTlRTLCBORUVEX1BBVENIICovCiAgKSwgX2hvaXN0ZWRfNV0pLCBfY3JlYXRlVk5vZGUoInAiLCBudWxsLCBfdG9EaXNwbGF5U3RyaW5nKCRkYXRhLmVyck1zZyksIDEKICAvKiBURVhUICovCiAgKV0sIDMyCiAgLyogSFlEUkFURV9FVkVOVFMgKi8KICApXSk7Cn0pOw=="},{"version":3,"sources":["/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/src/components/CreatePost.vue"],"names":[],"mappings":";;;;;;;AACS,EAAA,EAAE,EAAC;;;AAEK,EAAA,EAAE,EAAC;;;;AAGH,EAAA,EAAE,EAAC;;;AAGH,EAAA,EAAE,EAAC;;;8BAEJ,YAAA,CAAoD,OAApD,EAAoD;AAA7C,EAAA,IAAI,EAAC,QAAwC;AAA/B,EAAA,KAAK,EAAC,YAAyB;AAAZ,EAAA,KAAK,EAAC;AAAM,CAApD,E,IAAA,E;;AAAA,C;;;;;uBAVZ,YAAA,CAcM,KAdN,EAAA,UAAA,EAcM,CAbF,YAAA,CAYO,MAZP,EAYO;AAZA,IAAA,QAAM,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,cAAA,CAAA;AAAA,aAAU,QAAA,CAAA,UAAA,IAAA,QAAA,CAAA,UAAA,OAAA,QAAA,YAAV;AAAA,KAAA,EAAoB,CAAA,SAAA,CAApB,CAAA;AAYN,GAZP,E,CACI,YAAA,CAEM,KAFN,EAAA,UAAA,EAEM,C,gBADF,YAAA,CAAwF,UAAxF,EAAwF;AAA9E,IAAA,IAAI,EAAC,UAAyE;AAA9D,IAAA,WAAW,EAAC,uBAAkD;;aAAjB,KAAA,CAAA,IAAA,GAAI,M;;AAAa,GAAxF,E,IAAA,E;;AAAA,G,iBAAuE,KAAA,CAAA,I,GACrE,CAFN,C,EAGwB,KAAA,CAAA,O,kBAAxB,YAAA,CAEM,KAFN,EAAA,UAAA,EAEM,CADF,YAAA,CAAmC,KAAnC,EAAmC;AAA7B,IAAA,GAAG,EAAE,KAAA,CAAA,OAAwB;AAAd,IAAA,GAAG,EAAE,KAAA,CAAA;AAAS,GAAnC,E,IAAA,E;;AAAA,I,cAAA,CACE,CAFN,C,uCAGA,YAAA,CAGM,KAHN,EAAA,UAAA,EAGM,CAFF,YAAA,CAAwF,OAAxF,EAAwF;AAAjF,IAAA,IAAI,EAAC,MAA4E;AAArE,IAAA,GAAG,EAAC,MAAiE;AAA1D,IAAA,IAAI,EAAC,MAAqD;AAA9C,IAAA,KAAK,EAAC,QAAwC;AAA/B,IAAA,EAAE,EAAC,MAA4B;AAApB,IAAA,QAAM,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,QAAA,CAAA,UAAA,IAAA,QAAA,CAAA,UAAA,OAAA,QAAA,YAAF;AAAA,KAAA;AAAc,GAAxF,E,IAAA,E;;AAAA,GAEE,EADF,UACE,CAHN,C,EAIA,YAAA,CAAiB,GAAjB,EAAiB,IAAjB,EAAiB,gBAAA,CAAZ,KAAA,CAAA,MAAY,CAAjB,EAAW;AAAA;AAAX,G,CAXJ,E;;AAAA,GAaE,CAdN,C","sourcesContent":["<template>\n    <div id=\"createPost\">\n        <form @submit.prevent=\"createPost\">\n            <div id=\"text\">\n                <textarea name=\"textarea\" placeholder=\"Publiez votre message\" v-model=\"text\"></textarea>\n            </div>\n            <div id=\"preview\" v-if=\"preview\">\n                <img :src=\"preview\" :alt=\"preview\">\n            </div>         \n            <div id=\"btns\">                \n                <input type=\"file\" ref=\"file\" name=\"file\" class=\"upload\" id=\"file\" @change=\"selectFile\">             \n                <input type=\"submit\" value=\"J'envoie !\" class=\"btn\">\n            </div>\n            <p>{{errMsg}}</p>\n        </form>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nexport default {\n    name: 'CreatePost',\n    data() {\n        return {\n            text: null,\n            file: '',\n            preview: null,\n            errMsg: null\n        }\n    },\n    methods: {\n        selectFile(event) {\n            /* sur le onchange on va attribuer cette valeur à file (nécessaire pour l'envoi au backend) */\n            this.file = this.$refs.file.files[0]\n            let input = event.target\n            if(input.files) {\n                let reader = new FileReader()\n                reader.onload = (e) => {\n                    this.preview = e.target.result\n                }\n                reader.readAsDataURL(input.files[0])\n            }\n        },\n        createPost() {\n            /* on peut envoyer un post sans image mais il faut au moins qu'il y est un texte */     \n            if (!this.text) {\n                this.errMsg = \"Error => vous devez remplir le champ <message> pour créer une nouvelle publication!\"\n                return\n            }\n            /* on créé un objet formData afin de pouvoir ajouter le texte et surtout le file choisi */\n            let formData = new FormData()\n            formData.append('text', this.text)\n            formData.append('file', this.file)\n            formData.append('userId', localStorage.getItem('userId'))\n            /* envoi du form via axios.put de l'objet formData */\n            axios.post('http://localhost:3000/api/posts/create', formData, {\n                headers: {\n                    Authorization: `Bearer ${localStorage.getItem('token')}`\n                },\n            })  \n                .then(res => this.$emit('add-Post', res.data))\n                .catch(error => console.log(error))\n            /* on emit le toggle-Create pour cacher ce composant tout en effaçant les inputs */\n            this.$emit('toggle-Create')\n            this.text = ''\n            this.file = ''\n            this.preview = ''\n            document.querySelector('form').reset()           \n        }\n    }\n}\n</script>\n\n<style scoped>\n#createPost {\n    max-width: 60%;\n    box-shadow: 2px 2px 8px 5px rgb(0 0 0 / 10%);\n    margin: auto;\n    margin-top: 2rem;\n    padding: 1rem;\n    border-radius: 4px;\n}\nform {\n    display: flex;\n    flex-direction: column;\n}\ntextarea {\n    height: 5rem;\n    padding: 1rem 0 0 1rem;\n    width: calc(100% - 1rem)\n}\n#preview {\n    overflow: hidden;\n    max-width: 20%;\n}\nimg {\n    height: 100%;\n    width: 100%;\n    object-fit: cover;\n}\n#btns {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 1rem;\n    border-top: 1px solid hsla(0, 0%, 0%, 0.5);\n    padding-top: 2rem;\n}\n.btn {\n    background-color: #1c68e6;\n    border-style: none;\n    outline: none;\n    width: 20%;\n    border-radius: 8px;\n    height: 40px;\n    color: white;\n}\n.upload:active {\n  transform: scale(0.98);\n}\np {\n    margin-top: 1.6rem;\n}\n@media screen and (max-width: 992px) {\n    #createPost {\n        max-width: 90%;\n    }\n}\n</style>"],"sourceRoot":""}]}