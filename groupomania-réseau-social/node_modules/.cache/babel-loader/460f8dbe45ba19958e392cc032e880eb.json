{"remainingRequest":"/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/src/components/CreatePost.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/src/components/CreatePost.vue","mtime":1648212458152},{"path":"/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/node_modules/cache-loader/dist/cjs.js","mtime":1646670308046},{"path":"/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/node_modules/babel-loader/lib/index.js","mtime":1646670309179},{"path":"/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/node_modules/cache-loader/dist/cjs.js","mtime":1646670308046},{"path":"/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/node_modules/vue-loader-v16/dist/index.js","mtime":1646670309571}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDcmVhdGVQb3N0JywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6IG51bGwsCiAgICAgIHRleHQ6IG51bGwsCiAgICAgIGZpbGU6ICcnLAogICAgICBwcmV2aWV3OiBudWxsLAogICAgICBlcnJNc2c6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZWxlY3RGaWxlOiBmdW5jdGlvbiBzZWxlY3RGaWxlKGV2ZW50KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvKiBzdXIgbGUgb25jaGFuZ2Ugb24gdmEgYXR0cmlidWVyIGNldHRlIHZhbGV1ciDDoCBmaWxlIChuw6ljZXNzYWlyZSBwb3VyIGwnZW52b2kgYXUgYmFja2VuZCkgKi8KICAgICAgdGhpcy5maWxlID0gdGhpcy4kcmVmcy5maWxlLmZpbGVzWzBdOwogICAgICB2YXIgaW5wdXQgPSBldmVudC50YXJnZXQ7CgogICAgICBpZiAoaW5wdXQuZmlsZXMpIHsKICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBfdGhpcy5wcmV2aWV3ID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgIH07CgogICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGlucHV0LmZpbGVzWzBdKTsKICAgICAgfQogICAgfSwKICAgIGNyZWF0ZVBvc3Q6IGZ1bmN0aW9uIGNyZWF0ZVBvc3QoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgLyogb24gcGV1dCBlbnZveWVyIHVuIHBvc3Qgc2FucyBpbWFnZSBtYWlzIGlsIGZhdXQgYXUgbW9pbnMgcXUnaWwgeSBlc3QgdW4gdGV4dGUgKi8KICAgICAgaWYgKCF0aGlzLnRpdGxlKSB7CiAgICAgICAgdGhpcy5lcnJNc2cgPSAiRXJyb3IgPT4gVm91cyBkZXZleiByZW1wbGlyIGxlIGNoYW1wIHRpdHJlIGV0IGNvbW1lbnRhaXJlISI7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8qIG9uIGNyw6nDqSB1biBvYmpldCBmb3JtRGF0YSBhZmluIGRlIHBvdXZvaXIgYWpvdXRlciBsZSB0ZXh0ZSBldCBzdXJ0b3V0IGxlIGZpbGUgY2hvaXNpICovCgoKICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgndGl0bGUnLCB0aGlzLnRpdGxlKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCd0ZXh0JywgdGhpcy50ZXh0KTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgdGhpcy5maWxlKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCd1c2VySWQnLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJykpOwogICAgICAvKiBlbnZvaSBkdSBmb3JtIHZpYSBheGlvcy5wdXQgZGUgbCdvYmpldCBmb3JtRGF0YSAqLwoKICAgICAgYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wb3N0cy9jcmVhdGUnLCBmb3JtRGF0YSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLiRlbWl0KCdhZGQtUG9zdCcsIHJlcy5kYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICAgIC8qIG9uIGVtZXQgbGUgdG9nZ2xlLUNyZWF0ZSBwb3VyIGNhY2hlciBjZSBjb21wb3NhbnQgdG91dCBlbiBlZmZhw6dhbnQgbGVzIGlucHV0cyAqLwoKICAgICAgdGhpcy4kZW1pdCgndG9nZ2xlLUNyZWF0ZScpOwogICAgICB0aGlzLnRpdGxlID0gJyc7CiAgICAgIHRoaXMudGV4dCA9ICcnOwogICAgICB0aGlzLmZpbGUgPSAnJzsKICAgICAgdGhpcy5wcmV2aWV3ID0gJyc7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKS5yZXNldCgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/src/components/CreatePost.vue"],"names":[],"mappings":"AAsBA,OAAO,KAAP,MAAkB,OAAlB;AACA,eAAe;AACX,EAAA,IAAI,EAAE,YADK;AAEX,EAAA,IAFW,kBAEJ;AACH,WAAO;AACH,MAAA,KAAK,EAAE,IADJ;AAEH,MAAA,IAAI,EAAE,IAFH;AAGH,MAAA,IAAI,EAAE,EAHH;AAIH,MAAA,OAAO,EAAE,IAJN;AAKH,MAAA,MAAM,EAAE;AALL,KAAP;AAOH,GAVU;AAWX,EAAA,OAAO,EAAE;AACL,IAAA,UADK,sBACM,KADN,EACa;AAAA;;AACd;AACA,WAAK,IAAL,GAAY,KAAK,KAAL,CAAW,IAAX,CAAgB,KAAhB,CAAsB,CAAtB,CAAZ;AACA,UAAI,KAAI,GAAI,KAAK,CAAC,MAAlB;;AACA,UAAG,KAAK,CAAC,KAAT,EAAgB;AACZ,YAAI,MAAK,GAAI,IAAI,UAAJ,EAAb;;AACA,QAAA,MAAM,CAAC,MAAP,GAAgB,UAAC,CAAD,EAAO;AACnB,UAAA,KAAI,CAAC,OAAL,GAAe,CAAC,CAAC,MAAF,CAAS,MAAxB;AACJ,SAFA;;AAGA,QAAA,MAAM,CAAC,aAAP,CAAqB,KAAK,CAAC,KAAN,CAAY,CAAZ,CAArB;AACJ;AACH,KAZI;AAaL,IAAA,UAbK,wBAaQ;AAAA;;AACT;AACA,UAAI,CAAC,KAAK,KAAV,EAAiB;AACb,aAAK,MAAL,GAAc,4DAAd;AACA;AACJ;AACA;;;AACA,UAAI,QAAO,GAAI,IAAI,QAAJ,EAAf;AACA,MAAA,QAAQ,CAAC,MAAT,CAAgB,OAAhB,EAAyB,KAAK,KAA9B;AACA,MAAA,QAAQ,CAAC,MAAT,CAAgB,MAAhB,EAAwB,KAAK,IAA7B;AACA,MAAA,QAAQ,CAAC,MAAT,CAAgB,MAAhB,EAAwB,KAAK,IAA7B;AACA,MAAA,QAAQ,CAAC,MAAT,CAAgB,QAAhB,EAA0B,YAAY,CAAC,OAAb,CAAqB,QAArB,CAA1B;AACA;;AACA,MAAA,KAAK,CAAC,IAAN,CAAW,wCAAX,EAAqD,QAArD,EAA+D;AAC3D,QAAA,OAAO,EAAE;AACL,UAAA,aAAa,mBAAY,YAAY,CAAC,OAAb,CAAqB,OAArB,CAAZ;AADR;AADkD,OAA/D,EAKK,IALL,CAKU,UAAA,GAAE;AAAA,eAAK,MAAI,CAAC,KAAL,CAAW,UAAX,EAAuB,GAAG,CAAC,IAA3B,CAAL;AAAA,OALZ,EAMK,KANL,CAMW,UAAA,KAAI;AAAA,eAAK,OAAO,CAAC,GAAR,CAAY,KAAZ,CAAL;AAAA,OANf;AAOA;;AACA,WAAK,KAAL,CAAW,eAAX;AACA,WAAK,KAAL,GAAY,EAAZ;AACA,WAAK,IAAL,GAAY,EAAZ;AACA,WAAK,IAAL,GAAY,EAAZ;AACA,WAAK,OAAL,GAAe,EAAf;AACA,MAAA,QAAQ,CAAC,aAAT,CAAuB,MAAvB,EAA+B,KAA/B;AACJ;AAxCK;AAXE,CAAf","sourcesContent":["<template>\n    <div id=\"createPost\">\n        <form @submit.prevent=\"createPost\">\n            <div id=\"text1\">\n                <input class=\"title\" name=\"input\" placeholder=\"Titre\" v-model=\"title\">\n            </div>\n            <div id=\"text\">\n                <textarea name=\"textarea\" placeholder=\"Publiez votre message\" v-model=\"text\"></textarea>\n            </div>\n            <div id=\"preview\" v-if=\"preview\">\n                <img :src=\"preview\" :alt=\"preview\">\n            </div>         \n            <div id=\"btns\">                \n                <input type=\"file\" ref=\"file\" name=\"file\" class=\"upload\" id=\"file\" @change=\"selectFile\">             \n                <input type=\"submit\" value=\"J'envoie !\" class=\"btn\">\n            </div>\n            <p>{{errMsg}}</p>\n        </form>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nexport default {\n    name: 'CreatePost',\n    data() {\n        return {\n            title: null,\n            text: null,\n            file: '',\n            preview: null,\n            errMsg: null\n        }\n    },\n    methods: {\n        selectFile(event) {\n            /* sur le onchange on va attribuer cette valeur à file (nécessaire pour l'envoi au backend) */\n            this.file = this.$refs.file.files[0]\n            let input = event.target\n            if(input.files) {\n                let reader = new FileReader()\n                reader.onload = (e) => {\n                    this.preview = e.target.result\n                }\n                reader.readAsDataURL(input.files[0])\n            }\n        },\n        createPost() {\n            /* on peut envoyer un post sans image mais il faut au moins qu'il y est un texte */     \n            if (!this.title) {\n                this.errMsg = \"Error => Vous devez remplir le champ titre et commentaire!\"\n                return\n            }\n            /* on créé un objet formData afin de pouvoir ajouter le texte et surtout le file choisi */\n            let formData = new FormData()\n            formData.append('title', this.title)\n            formData.append('text', this.text)\n            formData.append('file', this.file)\n            formData.append('userId', localStorage.getItem('userId'))\n            /* envoi du form via axios.put de l'objet formData */\n            axios.post('http://localhost:3000/api/posts/create', formData, {\n                headers: {\n                    Authorization: `Bearer ${localStorage.getItem('token')}`\n                },\n            })  \n                .then(res => this.$emit('add-Post', res.data))\n                .catch(error => console.log(error))\n            /* on emet le toggle-Create pour cacher ce composant tout en effaçant les inputs */\n            this.$emit('toggle-Create')\n            this.title= ''\n            this.text = ''\n            this.file = ''\n            this.preview = ''\n            document.querySelector('form').reset()           \n        }\n    }\n}\n</script>\n\n<style scoped>\n#createPost {\n    max-width: 50%;\n    box-shadow: 2px 2px 8px 5px rgb(0 0 0 / 10%);\n    margin: auto;\n    margin-top: 2rem;\n    padding: 1rem;\n    border-radius: 4px;\n}\nform {\n    display: flex;\n    justify-content: space-around;\n    flex-direction: column;\n}\n.title {\n    margin-bottom: 1rem;\n    padding: 0.4rem 0 0.5rem 1rem !important;\n     height: 1rem;\n    width: calc(100% - 1rem)\n}\ntextarea {\n    height: 5rem;\n    padding: 1rem 0 0 1rem;\n    width: calc(100% - 1rem)\n}\n#preview {\n    overflow: hidden;\n    max-width: 20%;\n}\nimg {\n    height: 100%;\n    width: 100%;\n    object-fit: cover;\n}\n#btns {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 1rem;\n    border-top: 1px solid hsla(0, 0%, 0%, 0.5);\n    padding-top: 2rem;\n}\n.btn {\n    background-color: #1c68e6;\n    border-style: none;\n    outline: none;\n    width: 20%;\n    border-radius: 8px;\n    height: 40px;\n    color: white;\n}\n.upload:active {\n  transform: scale(0.98);\n}\np {\n    margin-top: 1.6rem;\n}\n@media screen and (max-width: 992px) {\n    #createPost {\n        max-width: 90%;\n    }\n}\n</style>"],"sourceRoot":""}]}