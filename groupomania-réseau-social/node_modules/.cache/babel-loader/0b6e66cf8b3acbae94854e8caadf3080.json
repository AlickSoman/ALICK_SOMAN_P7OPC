{"remainingRequest":"/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/src/components/Posts.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/src/components/Posts.vue","mtime":1648840352599},{"path":"/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/node_modules/cache-loader/dist/cjs.js","mtime":1646670308046},{"path":"/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/node_modules/babel-loader/lib/index.js","mtime":1646670309179},{"path":"/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/node_modules/cache-loader/dist/cjs.js","mtime":1646670308046},{"path":"/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/node_modules/vue-loader-v16/dist/index.js","mtime":1646670309571}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9hZG1pbi9EZXNrdG9wL0FMSUNLX1NPTUFOX1A3T1BDL2dyb3Vwb21hbmlhLXJceEU5c2VhdS1zb2NpYWwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IENvbW1lbnRzIGZyb20gIi4uL2NvbXBvbmVudHMvQ29tbWVudHMudnVlIjsKaW1wb3J0IExpa2VzIGZyb20gIi4uL2NvbXBvbmVudHMvTGlrZXMudnVlIjsKaW1wb3J0IHJvdXRlciBmcm9tICcuLi9yb3V0ZXInOwppbXBvcnQgX21vbWVudCBmcm9tICdtb21lbnQnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1Bvc3RzJywKICBjb21wb25lbnRzOiB7CiAgICBDb21tZW50czogQ29tbWVudHMsCiAgICBMaWtlczogTGlrZXMKICB9LAogIHByb3BzOiB7CiAgICBwb3N0czogQXJyYXksCiAgICBpc0FkbWluOiBCb29sZWFuLAogICAgdXNlcklkOiBOdW1iZXIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb21tZW50czogW10sCiAgICAgIGxpa2VzOiBbXSwKICAgICAgc2hvd0NvbW1lbnRzOiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8gZm9ybWF0YWdlIGRlIGxhIGRhdGUKICAgIG1vbWVudDogZnVuY3Rpb24gbW9tZW50KGRhdGUpIHsKICAgICAgcmV0dXJuIF9tb21lbnQoZGF0ZSkuZm9ybWF0KCdERC9NTS9ZWVlZJyk7CiAgICB9LAoKICAgIC8qIGTDqXRlcm1pbmUgbGUgc3RhdHV0IGRlIGwndXNlciBjb25uZWN0w6kgcGFyIHJhcHBvcnQgw6AgY2UgcG9zdCAqLwogICAgYXV0aDogZnVuY3Rpb24gYXV0aChwb3N0VXNlcklkKSB7CiAgICAgIGlmICh0aGlzLmlzQWRtaW4pIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudXNlcklkICE9PSBwb3N0VXNlcklkKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCgogICAgLyogbGEgZm9uY3Rpb24gcG91ciBtb250cmVyL2NhY2hlciBsYSBzZWN0aW9uIGNvbW1lbnRhaXJlcyAqLwogICAgdG9nZ2xlQ29tbWVudHM6IGZ1bmN0aW9uIHRvZ2dsZUNvbW1lbnRzKHBvc3RJZCkgewogICAgICBpZiAodGhpcy5zaG93Q29tbWVudHMgPT0gcG9zdElkKSB7CiAgICAgICAgcG9zdElkID0gbnVsbDsKICAgICAgfQoKICAgICAgdGhpcy5zaG93Q29tbWVudHMgPSBwb3N0SWQ7CiAgICAgIHRoaXMuZmV0Y2hDb21tZW50cyhwb3N0SWQpOwogICAgfSwKCiAgICAvKiBwb3VyIHN1cHByaW1lciBsZSBwb3N0ICovCiAgICBkZWxldGVQb3N0OiBmdW5jdGlvbiBkZWxldGVQb3N0KHBvc3RJZCkgewogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICB1c2VySWQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKQogICAgICB9OwoKICAgICAgaWYgKGNvbmZpcm0oIsOqdGVzIHZvdXMgc8O7ciBkZSB2b3Vsb2lyIHN1cHByaW1lciBjZXR0ZSBwdWJsaWNhdGlvbiA/IikpIHsKICAgICAgICBmZXRjaCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wb3N0cy8iLmNvbmNhdChKU09OLnN0cmluZ2lmeShwb3N0SWQpKSwgewogICAgICAgICAgbWV0aG9kOiAnREVMRVRFJywKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSkKICAgICAgICAgIH0sCiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRlbWl0KCdkZWxldGUtUG9zdCcsIHBvc3RJZCk7IC8vIDwtIG9uIGVudm9pZSB1biBlbWl0dGVyIHBvdXIgYWN0dWFsaXNlciBkeW5hbWlxdWVtZW50CiAgICAgIH0KICAgIH0sCgogICAgLyogdmVycyBsYSBwYWdlIGRlIG1vZGlmaWNhdGlvbiBkdSBwb3N0IChzZWxvbiBzb24gaWQpICovCiAgICBtb2RpZnlQb3N0OiBmdW5jdGlvbiBtb2RpZnlQb3N0KGlkKSB7CiAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAiL21vZGlmeS1wb3N0LyIuY29uY2F0KGlkKQogICAgICB9KTsKICAgIH0sCgogICAgLyogYWpvdXQgZCd1biBjb21tZW50YWlyZSAodmlhIGxlcyBlbWl0dGVycyBkdSBjb21wb3NhbnQgJ0NvbW1lbnQnKSAqLwogICAgYWRkQ29tbWVudDogZnVuY3Rpb24gYWRkQ29tbWVudChjb21tZW50SWQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGNvbW1lbnQsIG5ld0NvbW1lbnQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvY29tbWVudHMvIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkoY29tbWVudElkKSkpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBjb21tZW50ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1lbnQuanNvbigpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBuZXdDb21tZW50ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBfdGhpcy5jb21tZW50cy51bnNoaWZ0KG5ld0NvbW1lbnQpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIG5ld0NvbW1lbnQpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAoKICAgIC8qIGFjdHVhbGlzYXRpb24gc3VpdGUgw6AgbGEgc3VwcHJlc3Npb24gZHUgY29tbWVudGFpcmUgKi8KICAgIGRlbGV0ZUNvbW1lbnQ6IGZ1bmN0aW9uIGRlbGV0ZUNvbW1lbnQoY29tbWVudElkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMi5jb21tZW50cyA9IF90aGlzMi5jb21tZW50cy5maWx0ZXIoZnVuY3Rpb24gKGNvbW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1lbnQuaWQgIT0gY29tbWVudElkOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKCiAgICAvKiBhY3R1YWxpc2F0aW9uIHN1aXRlIMOgIGxhIG1vZGlmaWNhdGlvbiBkdSBjb21tZW50YWlyZSAqLwogICAgbW9kaWZ5Q29tbWVudDogZnVuY3Rpb24gbW9kaWZ5Q29tbWVudChjb21tZW50SWQsIG5ld1RleHQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMzLmNvbW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGNvbW1lbnQpIHsKICAgICAgICAgICAgICAgICAgaWYgKGNvbW1lbnQuaWQgPT0gY29tbWVudElkKSB7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudC50ZXh0ID0gbmV3VGV4dDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKCiAgICAvKiBsZSBmZXRjaCBkZSB0b3VzIGxlcyBjb21tZW50YWlyZXMgZCd1biBwb3N0IChzZWxvbiBzb24gcG9zdElkKSAqLwogICAgZmV0Y2hDb21tZW50czogZnVuY3Rpb24gZmV0Y2hDb21tZW50cyhwb3N0SWQpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgcmVzQ29tbWVudHMsIGRhdGFDb21tZW50czsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEocG9zdElkID09IG51bGwpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvY29tbWVudHMvIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkocG9zdElkKSwgIi9hbGwiKSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlc0NvbW1lbnRzID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzQ29tbWVudHMuanNvbigpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBkYXRhQ29tbWVudHMgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIGRhdGFDb21tZW50cy5yZXZlcnNlKCk7CiAgICAgICAgICAgICAgICBfdGhpczQuY29tbWVudHMgPSBkYXRhQ29tbWVudHM7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgZGF0YUNvbW1lbnRzKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/admin/Desktop/ALICK_SOMAN_P7OPC/groupomania-réseau-social/src/components/Posts.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div v-if=\"posts.length > 0\" id=\"postsContainer\">\n        <div :key=\"post.id\" v-for=\"post in posts\" class=\"post\">\n            <div class=\"header\">\n                <div class=\"profileContainer\">\n                    <img :src=\"'http://localhost:3000/images/' + post.User.profile\" :alt=\"post.User.profile\" class=\"profile\">    \n                </div>\n                <div class=\"description\">\n                    <div>\n                        <h4>{{ post.User.firstname }} {{ post.User.lastname }}</h4>\n                        <p>Le : {{moment(post.createdAt )}}</p>\n                    </div>                 \n                    <div v-if=\"auth(post.userId)\" class=\"optionsBtn\">\n                        <button @click=\"modifyPost(post.id)\"><i class=\"far fa-edit modify\"></i>edit</button>\n                        <button @click=\"deletePost(post.id)\"><i class=\"far fa-trash-alt delete\"></i></button>    \n                    </div>\n                </div>                               \n            </div>\n            <div class=\"centerPost\"></div>\n            <h2 class=\"title\">{{ post.title }}</h2>\n            <div v-if=\"post.file\" class=\"fileContainer\">          \n                <img :src=\"'http://localhost:3000/images/' + post.file\" :alt=\"post.file\" class=\"file\">\n            </div>\n            <p class=\"description\">{{ post.text }}</p>\n            <div class=\"interaction\">\n                <Likes :postId=\"post.id\" :userId=\"userId\" />\n                |\n                <button @click=\"toggleComments(post.id)\" class=\"btn comments\"><i class=\"far fa-comment\"></i>Réagir !</button>\n            </div>\n            <Comments v-if=\"showComments == post.id\" :comments=\"comments\" :isAdmin=\"isAdmin\" :userId=\"userId\" :postId=\"post.id\" \n                @created=\"addComment\" @deleted=\"deleteComment\" @modified=\"modifyComment\"/>             \n        </div>\n    </div>\n    <div id=\"noPost\" v-else>\n        <p>\"!\"</p>\n    </div>\n</template>\n\n<script>\nimport Comments from \"../components/Comments.vue\"\nimport Likes from \"../components/Likes.vue\"\nimport router from '../router'\nimport moment from 'moment'\nexport default {\n    name: 'Posts',\n    components: {\n        Comments,\n        Likes\n    },\n    props: {\n        posts: Array,\n        isAdmin: Boolean,\n        userId: Number\n    },\n    data() {\n        return {\n            comments: [],\n            likes: [],\n            showComments: null,\n        }\n    },\n    methods: {\n\n        // formatage de la date\n        moment(date) {\n            return moment(date).format('DD/MM/YYYY');\n        },\n        /* détermine le statut de l'user connecté par rapport à ce post */\n        auth(postUserId) {\n            if (this.isAdmin) {\n                return true\n            }\n            if (this.userId !== postUserId) {\n                return false\n            }\n            return true          \n        },\n        /* la fonction pour montrer/cacher la section commentaires */\n        toggleComments(postId) {\n            if (this.showComments == postId) {\n                postId = null\n            }\n            this.showComments = postId\n            this.fetchComments(postId)\n        },\n        /* pour supprimer le post */\n        deletePost(postId) {\n            const data = {\n                userId: localStorage.getItem('userId')\n            }\n            if (confirm(\"êtes vous sûr de vouloir supprimer cette publication ?\")) {\n                    fetch(`http://localhost:3000/api/posts/${JSON.stringify(postId)}`, {\n                        method: 'DELETE',\n                        headers: {\n                            Authorization: `Bearer ${localStorage.getItem('token')}`\n                        },\n                        body: JSON.stringify(data)                \n                    })\n                        .catch(error => console.log(error))\n                this.$emit('delete-Post', postId) // <- on envoie un emitter pour actualiser dynamiquement\n            }\n        },\n        /* vers la page de modification du post (selon son id) */\n        modifyPost(id) {\n            router.push({ path: `/modify-post/${id}` })\n        },\n        /* ajout d'un commentaire (via les emitters du composant 'Comment') */\n        async addComment(commentId) {\n            const comment = await fetch(`http://localhost:3000/api/comments/${JSON.stringify(commentId)}`)\n            const newComment =  await comment.json()\n            this.comments.unshift(newComment)\n            return newComment\n        },\n        /* actualisation suite à la suppression du commentaire */\n        async deleteComment(commentId) {\n            this.comments = this.comments.filter((comment) => comment.id != commentId)\n        },\n        /* actualisation suite à la modification du commentaire */\n        async modifyComment(commentId, newText) {\n            this.comments.forEach(comment => {\n                if(comment.id == commentId) {\n                    comment.text = newText\n                }\n            }) \n        },            \n        /* le fetch de tous les commentaires d'un post (selon son postId) */\n        async fetchComments(postId) {\n            if (postId == null) {\n                return\n            }\n            const resComments = await fetch(`http://localhost:3000/api/comments/${JSON.stringify(postId)}/all`)\n            const dataComments = await resComments.json()\n            dataComments.reverse()\n            this.comments = dataComments\n            return dataComments\n        }        \n    }\n}\n</script>\n\n<style scoped>\n#postsContainer {\n    display: flex;\n    justify-content: space-around;\n    flex-wrap: wrap;\n    width: auto;\n    margin: 2%;\n    border-radius: 4px;\n}\n.post {\n    box-shadow: 2px 2px 8px 5px rgb(0 0 0 / 10%);\n    margin: auto;\n    margin-top: 2rem;\n    padding: 1rem;\n    border-radius: 4px;\n    width: 300px;\n    max-width: 400;\n}\n.header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n.optionsBtn{\n    border-top: 1px solid red;\n    padding: 10px 0px 10px 0px;\n}\n.centerPost{\n    display: flex;\n    flex-direction: column;\n    padding: 0 auto 20px auto;\n    margin-bottom:20px ;\n}\nh4{\n    color: #002b5c;\n    font-weight: 800;\n    text-transform: uppercase;\n}\n.title {\n    text-transform: capitalize;\n    color:#002b5c;\n    text-align: center;\n    margin: 0;\n    padding: 0 0 1rem 1rem !important;\n    height: 1rem;\n    width: calc(90% - 1rem)\n}\n.title {\n    text-transform: capitalize;}\n.description {\n    margin: 1.4rem 0 1.4rem 0;\n    text-align: center;\n    width: 90%;\n    padding-left: 16px;\n    flex-wrap: wrap;\n}\n.profileContainer {\n    margin: auto;\n    width: 70px;\n    height: 70px;\n    min-width: 64px;\n    min-height: 64px;\n    border-radius: 50%;\n    overflow: hidden;\n}\n.far{\n    color: #fd503a;\n}\n.profile {\n    height: 100%;\n    width: 100%;\n    object-fit: cover;\n}\n.modify, .delete {\n    margin: 0 0.2rem 0 1rem;\n}\n\n.fileContainer {\n    max-width: 400px;\n    max-height: 400px;\n    overflow: hidden;\n    object-fit: cover;\n    text-align: center;\n}\n.file {\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.1)\n}\nbutton {\n    background: none;\n    border-style: none;\n    outline: none;   \n}\n.interaction {\n    border-top: 1px solid rgb(0 0 0 / 10%);\n    padding-top: 2rem;\n    display: flex;\n    justify-content: space-between;\n}\n.comments {\n    width: 40%;\n}\n#noPost {\n    margin: 2rem;\n}\ni {\n    margin-right: 4px;\n}\n@media screen and (max-width: 992px) {\n    #postsContainer {\n        width: 100%;\n    }\n    .post {\n        margin: 2rem 0 0 0;\n        width: 230px;\n        max-width: 230;\n    }\n    .header {\n        flex-direction: column;\n    }\n    .profileContainer {\n        max-width: 64px;\n        max-height: 64px;\n    }\n    .description {\n        display: flex;\n        flex-direction: column;\n        text-align: center;\n        vertical-align: center;\n        width: 100%;\n        padding-left: 0;\n        flex-wrap: wrap;\n        line-height: 2rem;\n    }\n    .optionsBtn {\n        display: flex;\n        justify-content: space-between;\n    }\n}\n</style>"],"sourceRoot":""}]}