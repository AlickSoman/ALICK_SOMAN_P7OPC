{"remainingRequest":"/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/src/components/Likes.vue?vue&type=style&index=0&id=33de1c88&scoped=true&lang=css","dependencies":[{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/src/components/Likes.vue","mtime":1631120511000},{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/node_modules/css-loader/dist/cjs.js","mtime":1646670308787},{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1646670310118},{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/node_modules/postcss-loader/src/index.js","mtime":1646670309145},{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1646670308046},{"path":"/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1646670309571}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmJ1dHRvbiB7CiAgICBiYWNrZ3JvdW5kOiBub25lOwogICAgYm9yZGVyLXN0eWxlOiBub25lOwogICAgb3V0bGluZTogbm9uZTsKICAgIHdpZHRoOiA0MCUKfQpwIHsKICAgIG1hcmdpbjogMXJlbSAwIDFyZW0gMDsKfQoubGlrZWQgewogICAgY29sb3I6IHdoaXRlOwogICAgYmFja2dyb3VuZC1jb2xvcjogIzMxNzRlNDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICMzMTc0ZTQ7CiAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICBwYWRkaW5nOiAwLjVyZW07Cn0KLmxpa2UgewogICAgY29sb3I6ICMzMTc0ZTQ7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKICAgIGJvcmRlcjogMXB4IHNvbGlkICMzMTc0ZTQ7CiAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICBwYWRkaW5nOiAwLjVyZW07Cn0KaSB7CiAgICBtYXJnaW4tcmlnaHQ6IDRweDsKfQo="},{"version":3,"sources":["/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/src/components/Likes.vue"],"names":[],"mappings":";AA4EA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACH,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACb,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AACb;AACA,EAAE;IACE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;AACzB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACH,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACnB;AACA,CAAC,CAAC,CAAC,CAAC,EAAE;IACF,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACnB;AACA,EAAE;IACE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACrB","file":"/Users/admin/Desktop/P7_ALICK_SOMAN/vue-frontend/src/components/Likes.vue","sourceRoot":"","sourcesContent":["<template>\n    <button v-if=\"!liked\" @click=\"likePost(postId)\" class=\"btn\">\n        <i class=\"far fa-thumbs-up likeBtn like\"></i>\n        {{likes.length}}\n    </button>\n    <button v-else @click=\"unlikePost(postId)\" class=\"btn\">\n        <i class=\"far fa-thumbs-up likeBtn liked\"></i>\n        {{likes.length}}\n    </button>\n</template>\n\n<script>\nexport default {\n    name: 'Likes',\n    props: {\n        postId: Number,\n        userId: Number\n    },\n    data() {\n        return {\n            likes: [],\n            liked: null   \n        }\n    },\n    methods: {\n        /* fetch des Likes en fonction de l'id du post concerné */      \n        async fetchLikes(postId) {\n            const resLikes = await fetch(`http://localhost:3000/api/posts/${JSON.stringify(postId)}/likes`)\n            const dataLikes = await resLikes.json()\n            dataLikes.forEach(like => {\n            like.userId == this.userId ? this.liked = true : this.like = false // <- ici on vérifie si notre user à déjà liker ce post\n        })\n            return dataLikes\n        },\n        /* fonction qui like le post (selon son id) */\n        likePost(postId) {\n            const data = {\n                like: true,\n                userId: this.userId,\n                postId: postId\n            }\n            fetch(`http://localhost:3000/api/posts/${JSON.stringify(postId)}/like`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(data)\n            })\n                .then(res => res.json())\n                .then(data => this.likes.push(data))\n                .catch(error => console.log(error))\n            this.liked = true // <- on indiquer à notre template que le user à liker ce post\n        },\n        /* fonction pour unliker le post */\n        unlikePost(postId) {\n            const data = {\n                userId: this.userId\n            }\n            fetch(`http://localhost:3000/api/posts/${JSON.stringify(postId)}/unlike`, {\n                method: 'DELETE',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(data)\n            })\n            this.likes = this.likes.filter((like) => like.userId != this.userId) // <- pour unliker le post côté front\n            this.liked = false\n        }\n    },\n    async created() {\n        this.likes = await this.fetchLikes(this.postId)\n    }\n}\n</script>\n\n<style scoped>\nbutton {\n    background: none;\n    border-style: none;\n    outline: none;\n    width: 40%\n}\np {\n    margin: 1rem 0 1rem 0;\n}\n.liked {\n    color: white;\n    background-color: #3174e4;\n    border: 1px solid #3174e4;\n    border-radius: 50%;\n    padding: 0.5rem;\n}\n.like {\n    color: #3174e4;\n    background-color: white;\n    border: 1px solid #3174e4;\n    border-radius: 50%;\n    padding: 0.5rem;\n}\ni {\n    margin-right: 4px;\n}\n</style>\n"]}]}