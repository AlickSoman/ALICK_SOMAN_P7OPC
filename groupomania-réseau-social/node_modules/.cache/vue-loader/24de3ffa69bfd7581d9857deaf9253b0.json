{"remainingRequest":"/Users/admin/Desktop/P7 Test 2/vue-frontend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/P7 Test 2/vue-frontend/src/views/Signup.vue?vue&type=style&index=0&id=024d905c&scoped=true&lang=css","dependencies":[{"path":"/Users/admin/Desktop/P7 Test 2/vue-frontend/src/views/Signup.vue","mtime":1631120511000},{"path":"/Users/admin/Desktop/P7 Test 2/vue-frontend/node_modules/css-loader/dist/cjs.js","mtime":1646670308787},{"path":"/Users/admin/Desktop/P7 Test 2/vue-frontend/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1646670310118},{"path":"/Users/admin/Desktop/P7 Test 2/vue-frontend/node_modules/postcss-loader/src/index.js","mtime":1646670309145},{"path":"/Users/admin/Desktop/P7 Test 2/vue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1646670308046},{"path":"/Users/admin/Desktop/P7 Test 2/vue-frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1646670309571}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiNzaWdudXBGb3JtIHsKICAgIG1hcmdpbjogM3JlbTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjsKICAgIGZsZXgtd3JhcDogd3JhcDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwp9CmgzIHsKICAgIGJhY2tncm91bmQ6IG5vLXJlcGVhdCBjZW50ZXIgdXJsKCcuLi9hc3NldHMvbG9nb3MvaWNvbi5wbmcnKTsKICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7CiAgICBoZWlnaHQ6IDE2MHB4OwogICAgd2lkdGg6IDE2MHB4OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwp9CmZvcm0gewogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICB3aWR0aDogNDAwcHg7Cn0KaW5wdXQgewogICAgbWFyZ2luOiAwLjhyZW07CiAgICBwYWRkaW5nOiAxMHB4OwogICAgYm94LXNoYWRvdzogMnB4IDJweCA4cHggNXB4IHJnYigwIDAgMCAvIDEwJSk7CiAgICBib3JkZXItc3R5bGU6IG5vbmU7CiAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICBvdXRsaW5lOiBub25lOwp9CmlucHV0OmhvdmVyIHsKICAgIGJveC1zaGFkb3c6IDJweCAycHggOHB4IDVweCByZ2IoMCAwIDAgLyAxOCUpOwp9Ci5idG4gewogICAgY29sb3I6IHdoaXRlOwogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAxMjgsIDAsIDAuODM2KTsKICAgIG1hcmdpbjogMnJlbTsKfQpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5OTJweCkgewogICAgZm9ybSB7CiAgICAgICAgd2lkdGg6IDEwMCU7CiAgICB9Cn0K"},{"version":3,"sources":["/Users/admin/Desktop/P7 Test 2/vue-frontend/src/views/Signup.vue"],"names":[],"mappings":"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","file":"/Users/admin/Desktop/P7 Test 2/vue-frontend/src/views/Signup.vue","sourceRoot":"","sourcesContent":["<template>\n    <Nav redirection=\"/login\" :logged=\"false\"/>\n    <div id=\"signupForm\">\n        <h3>Signup</h3>\n        <form @submit.prevent=\"onSubmit\">\n            <input type=\"text\" name=\"firstname\" placeholder=\"Prénom\" v-model=\"dataForm.firstname\">\n            <input type=\"text\" name=\"lastname\" placeholder=\"Nom\" v-model=\"dataForm.lastname\">\n            <input type=\"email\" name=\"email\" placeholder=\"Email\" v-model=\"dataForm.email\">\n            <input type=\"password\" name=\"password\" placeholder=\"Mot de passe\" v-model=\"dataForm.password\">\n            <input type=\"submit\" value=\"Je m'inscris !\" class=\"btn\">\n        </form>\n        <h4>{{ errMsg }}</h4>\n        <p>Je possède déjà un compte ? Cliquez ici: <router-link to=\"/login\">Login</router-link></p>\n    </div>\n</template>\n\n<script>\nimport Nav from '../components/Nav.vue'\nimport router from '../router'\nimport store from '../store/index.js'\nexport default {\n    name: 'Signup',\n    components: {\n        Nav\n    },\n    data() {\n        return {\n            dataForm: {\n                firstname: null,\n                lastname: null,\n                email: null,\n                password: null,\n            },\n            errMsg: null\n        }\n    },\n    methods: {\n        onSubmit() {\n            /* assigne les valeurs entrées du formulaire à l'objet data */\n            const data = {\n                ...this.dataForm\n            }\n            const login = {\n                email: this.dataForm.email,\n                password: this.dataForm.password\n            }\n            /* vérifie si tous les champs sont bien remplis */\n            if (!data.firstname || !data.lastname || !data.email || !data.password) {\n                this.errMsg = \"Err! Remplissez tous les champs du formulaire\"\n                return\n            }    \n            /* nos regex */\n            const regexName = /^[a-zéèçàêïü]{2,50}(-| )?([a-zéèçà]{2,50})?$/gmi;\n            const regexEmail = /^[\\w-.]{2,32}@([\\w-]+\\.)+[\\w-]{2,4}$/g;\n            const regexPassword = /((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\\W]).{8,32})/;\n            /* nos véfifications */\n            if (!(regexName.test(data.firstname && data.lastname))) {\n                this.errMsg = \"Name Err! => format nom et/ou prénom incorrect\";\n                return\n            }\n            if (!(regexEmail.test(data.email))) {\n                this.errMsg = \"Email Err! => l'email inscrit n'a pas le bon format (exemple@mail.com)\"\n                return\n            }\n            if(!(regexPassword.test(data.password))) {\n                this.errMsg = \"Password Err! => entre 8 et 32 caractères + 1 minuscule min + 1 maj min + 1 caractère spécial\"\n                return\n            }\n\n            /* envoi à l'API (signup -> login -> /home) */\n            fetch('http://localhost:3000/api/users/signup', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                mode: 'cors',\n                body: JSON.stringify(data),\n            })  \n                .then(res => { \n                    if (res.status === 201) {\n                        /* Si le signup est réussi on passe par login pour obtenir le token + userId en réponse */\n                        fetch('http://localhost:3000/api/users/login', {\n                            method: 'POST',\n                            mode: 'cors',\n                            headers: {\n                                'Content-Type': 'application/json'\n                            },\n                            body: JSON.stringify(login)\n                        })\n                            .then(res => {\n                                const localData = res\n                                store.state.isLogged = true\n                                localData.json().then(data => {\n                                    localStorage.setItem('token', data.token)\n                                    localStorage.setItem('userId', data.userId)\n                                    localStorage.setItem('isAdmin', data.isAdmin)\n                                })                    \n                                if (res.status === 200 ) {\n                                    router.push({ path: 'home' })\n                                }  else {\n                                    this.errMsg = \"Email ou mot de passe incorrect\"\n                                }\n                            })\n                            .catch(error => {console.error(error)})    \n                    } else {\n                        this.errMsg = \"Email déjà existant\"\n                        return\n                    }\n                \n                })\n                .catch(error => {console.error(error)})\n        }\n    }\n}\n</script>\n\n<style scoped>\n#signupForm {\n    margin: 3rem;\n    display: flex;\n    justify-content: center;\n    align-content: center;\n    flex-wrap: wrap;\n    flex-direction: column;\n    align-items: center;\n}\nh3 {\n    background: no-repeat center url('../assets/logos/icon.png');\n    background-size: cover;\n    height: 160px;\n    width: 160px;\n    text-align: center;\n}\nform {\n    display: flex;\n    flex-direction: column;\n    width: 400px;\n}\ninput {\n    margin: 0.8rem;\n    padding: 10px;\n    box-shadow: 2px 2px 8px 5px rgb(0 0 0 / 10%);\n    border-style: none;\n    border-radius: 4px;\n    outline: none;\n}\ninput:hover {\n    box-shadow: 2px 2px 8px 5px rgb(0 0 0 / 18%);\n}\n.btn {\n    color: white;\n    background-color: rgba(0, 128, 0, 0.836);\n    margin: 2rem;\n}\n@media screen and (max-width: 992px) {\n    form {\n        width: 100%;\n    }\n}\n</style>"]}]}